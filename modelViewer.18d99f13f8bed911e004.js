(()=>{"use strict";var e,t={1495:(e,t,a)=>{const s=[{name:"Chair 1",modelName:"Chair1",srcFolder:"../static/models/chair1",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Chair 2",modelName:"Chair2",srcFolder:"../static/models/chair2",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Chair 3",modelName:"Chair3",srcFolder:"../static/models/chair3",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Chair 4",modelName:"Chair4",srcFolder:"../static/models/chair4",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Chair 5",modelName:"Chair5",srcFolder:"../static/models/chair5",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Armchair",modelName:"Armchair",srcFolder:"../static/models/armchair",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:1},{name:"Table 1",modelName:"Table1",srcFolder:"../static/models/table1",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2,envMapIntensity:2.5},{name:"Table 2",modelName:"Table2",srcFolder:"../static/models/table2",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Table 3",modelName:"Table3",srcFolder:"../static/models/table3",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Table 4",modelName:"Table4",srcFolder:"../static/models/table4",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:1,envMapIntensity:1.3},{name:"Table 5",modelName:"Table5",srcFolder:"../static/models/table5",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Desk",modelName:"Desk",srcFolder:"../static/models/desk",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Kitchen line",modelName:"KitchenLine",srcFolder:"../static/models/kitchen-line",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:1,envMapIntensity:1.4},{name:"Kitchen line with sink",modelName:"KitchenLineWithSink",srcFolder:"../static/models/kitchen-line-with-sink",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2,envMapIntensity:1.4},{name:"Library",modelName:"Library",srcFolder:"../static/models/library",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:1},{name:"Library Small",modelName:"LibrarySmall",srcFolder:"../static/models/library-small",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Cabinet",modelName:"Cabinet",srcFolder:"../static/models/cabinet",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Cabinet 2 Larger",modelName:"Cabinet2Larger",srcFolder:"../static/models/cabinet2larger",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Cabinet 2 Smaller",modelName:"Cabinet2Smaller",srcFolder:"../static/models/cabinet2smaller",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Cabinet 3",modelName:"Cabinet3",srcFolder:"../static/models/cabinet3",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Cabinet 4",modelName:"Cabinet4",srcFolder:"../static/models/cabinet4",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Cabinet 5",modelName:"Cabinet5",srcFolder:"../static/models/cabinet5",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Wardrobe",modelName:"Wardrobe",srcFolder:"../static/models/wardrobe",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Sofa",modelName:"Sofa",srcFolder:"../static/models/sofa",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Sofa2",modelName:"Sofa2",srcFolder:"../static/models/sofa2",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Bed",modelName:"Bed",srcFolder:"../static/models/bed",textureVariations:[{name:"clean",folderName:"clean",parts:[{name:"BedFrame",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"BedMattress",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}]},{name:"dirty",folderName:"dirty",parts:[{name:"BedFrame",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"BedMattress",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}]}],defaultTextureVariation:1,envMapIntensity:1},{name:"Bench",modelName:"Bench",srcFolder:"../static/models/bench",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty with scratches",folderName:"dirty-with-scratches",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:2},{name:"Bath",modelName:"Bath",srcFolder:"../static/models/bath",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:1,envMapIntensity:1},{name:"Toilet",modelName:"Toilet",srcFolder:"../static/models/toilet",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}],defaultTextureVariation:1,envMapIntensity:1},{name:"Cooker",modelName:"Cooker",srcFolder:"../static/models/cooker",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion","Alpha"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion","Alpha"]}],defaultTextureVariation:1},{name:"Fridge",modelName:"Fridge",srcFolder:"../static/models/fridge",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","Alpha","Emissive"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","Alpha","Emissive"]}],defaultTextureVariation:1,envMapIntensity:1.3,rotationParts:[{partName:"Fridge_DoorLower",labelName:"Dveře2",min:0,max:.5*Math.PI},{partName:"Fridge_DoorUpper",labelName:"Dveře1",min:0,max:.5*Math.PI}]},{name:"Little Creature Statue",modelName:"LittleCreatureStatue",srcFolder:"../static/models/little-creature-statue",textures:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"],envMapIntensity:1.5,lod:!0},{name:"Wine Glass",modelName:"WineGlass",srcFolder:"../static/models/wine-glass",textureVariations:[{name:"clean",folderName:"clean",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion","Alpha"]},{name:"dirty",folderName:"dirty",types:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion","Alpha"]}],defaultTextureVariation:1},{name:"Apple",modelName:"Apple",srcFolder:"../static/models/apple",textures:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"],lod:!0},{name:"Chocolate",modelName:"Chocolate",srcFolder:"../static/models/chocolate",textures:["BaseColor","Metallic","Roughness","Normal","AmbientOcclusion"]}];var o=a(5294),i=a.n(o);var n=a(9477),l=a(9365);var r=a(2086);const d=new class{constructor(e){this._modelsData=e,this._container=document.getElementById("ModelsSelectMenu"),this._selectedCard=null,this._intersectionObserver=new IntersectionObserver(this._observerCallback.bind(this),{root:null,threshold:0}),this._createModelCards(e),this._container.addEventListener("click",this._onMenuClick.bind(this));const t=document.getElementById("ModelsSelectMenuButton");t.addEventListener("click",(()=>{this._container.classList.toggle("models-page__models--opened"),t.classList.toggle("models-page__models-button--checked")}))}_createModelCards(e){for(let t=0;t<e.length;t++){const a=document.createElement("button");a.classList.add("model-card"),a.dataset.modelIndex=t;const s=document.createElement("div");s.classList.add("model-card__name"),s.innerText=e[t].name,a.appendChild(s),this._intersectionObserver.observe(a),0===t&&(a.classList.add("model-card--selected"),this._selectedCard=a),this._container.appendChild(a)}}_observerCallback(e){for(let t of e)if(t.isIntersecting){const e=t.target;this._intersectionObserver.unobserve(e);const a=document.createElement("div");a.classList.add("model-card__load-icon"),a.innerHTML='\n                    <svg>\n                        <use xlink:href="../static/img/icon-sprite.svg#icon-spinner10"></use>\n                    </svg>\n                ',e.appendChild(a);const s=document.createElement("img");s.classList.add("model-card__image"),s.src=`${this._modelsData[e.dataset.modelIndex].srcFolder}/image.jpg`,e.appendChild(s),s.addEventListener("load",(()=>a.remove()))}}_onMenuClick(e){const t=e.target.closest(".model-card");t&&t!==this._selectedCard&&(this._selectedCard.classList.remove("model-card--selected"),t.classList.add("model-card--selected"),this._selectedCard=t,this._onChange&&this._onChange(t.dataset.modelIndex))}onChange(e){this._onChange=e}}(s),c=new class{constructor(e){this._createUIElements(),this._modelsData=e,this._variationsMenu.addEventListener("click",this._onVariationMenuClick.bind(this)),this._selectedVariationButton=null,this._customControls=[]}set loading(e){if(e){this._loadIcon.style.display="block",this._modelName.style.display="none",this._variationsMenu.style.display="none",this._rotationControl.style.display="none",this._downloadButton.style.display="none";for(let e of this._customControls)e.style.display="none"}else{this._loadIcon.style.display="none",this._modelName.style.display="block",this._variationsMenu.style.display="flex",this._rotationControl.style.display="flex",this._downloadButton.style.display="block";for(let e of this._customControls)e.style.display="flex"}}_createUIElements(){const e=document.getElementById("ModelViewerViewport"),t=document.createElement("h2");t.classList.add("model-viewer__model-name"),t.style.display="none",e.appendChild(t);const a=document.createElement("button");a.classList.add("model-viewer__download-button"),a.innerHTML='Stáhnout\n            <svg>\n                <use xlink:href="../static/img/icon-sprite.svg#icon-download"></use>\n            </svg>\n        ',a.style.display="none",e.appendChild(a);const s=document.createElement("div");s.classList.add("model-viewer__variations"),s.style.display="none",e.appendChild(s);const o=document.createElement("div");o.classList.add("model-viewer__control");const i=document.createElement("label");i.innerText="Rotace",o.appendChild(i);const n=document.createElement("input");n.setAttribute("type","range"),n.setAttribute("min",0),n.setAttribute("max",2),n.setAttribute("step",.01),n.value=0,o.appendChild(n),o.style.display="none",e.appendChild(o);const l=document.createElement("div");l.classList.add("model-viewer__load-icon"),l.innerHTML='\n            <svg>\n                <use xlink:href="../static/img/icon-sprite.svg#icon-spinner10"></use>\n            </svg>\n        ',l.style.display="none",e.appendChild(l),this._modelName=t,this._downloadButton=a,this._variationsMenu=s,this._rotationControl=o,this._rotationControlInput=n,this._loadIcon=l,this._modelViewerViewport=e}_onVariationMenuClick(e){const t=e.target.closest(".model-viewer__variation-button");t&&t!==this._selectedVariationButton&&(this._selectedVariationButton.classList.remove("model-viewer__variation-button--active"),t.classList.add("model-viewer__variation-button--active"),this._selectedVariationButton=t,this._onVariationChange&&this._onVariationChange(t.dataset.variationIndex))}onVariationChange(e){this._onVariationChange=e}onRotationInputChange(e){this._rotationControlInput.addEventListener("input",(t=>{e(+t.target.value)}))}onDownloadButtonClick(e){this._downloadButton.addEventListener("click",e)}setActiveModel(e){if(this._modelName.innerText=this._modelsData[e].name,this._variationsMenu.innerHTML="",!this._modelsData[e].textures)for(let t=0;t<this._modelsData[e].textureVariations.length;t++){const a=document.createElement("button");a.classList.add("model-viewer__variation-button"),t===this._modelsData[e].defaultTextureVariation&&(a.classList.add("model-viewer__variation-button--active"),this._selectedVariationButton=a),a.innerText=this._modelsData[e].textureVariations[t].name,a.dataset.variationIndex=t,this._variationsMenu.appendChild(a)}}resetControls(){for(this._rotationControlInput.value=0;this._customControls.length>0;)this._customControls.pop().remove()}addLODInput(e){let t=0;e.traverse((e=>{e.isMesh&&e.name.includes("_LOD")&&(t++,e.name.includes("_LOD0")||(e.visible=!1))}));const a=document.createElement("div");a.classList.add("model-viewer__control");const s=document.createElement("label");s.innerText="LOD",a.appendChild(s);const o=document.createElement("input");o.setAttribute("type","range"),o.setAttribute("min",0),o.setAttribute("max",t-1),o.value=0,a.appendChild(o),a.style.bottom=1.6+2.4*(this._customControls.length+1)+"rem",o.addEventListener("input",(t=>{const a=`LOD${t.target.value}`;e.traverse((e=>{e.isMesh&&(e.visible=e.name.substring(e.name.length-a.length,e.name.length)===a)}))})),this._modelViewerViewport.appendChild(a),this._customControls.push(a)}addRotationPartInput(e,t,a,s,o){let i;e.traverse((e=>{e.isMesh&&e.name===t&&(i=e)}));const n=document.createElement("div");n.classList.add("model-viewer__control");const l=document.createElement("label");l.innerText=a,n.appendChild(l);const r=document.createElement("input");r.setAttribute("type","range"),r.setAttribute("min",s),r.setAttribute("max",o),r.setAttribute("step",.01),r.value=0,n.appendChild(r),n.style.bottom=1.6+2.4*(this._customControls.length+1)+"rem",r.addEventListener("input",(e=>{i.rotation.z=e.target.value})),this._modelViewerViewport.appendChild(n),this._customControls.push(n)}}(s),m=new class{constructor(e){this._modelsData=e,this._window=document.getElementById("DownloadWindow"),this._overlay=document.getElementById("PageOverlay"),this._closeButton=document.getElementById("DownloadWindowCloseButton"),this._variationSelectInput=document.getElementById("DownloadWindowVariationSelectInput"),this._texturesContainer=document.getElementById("DownloadWindowTexturesContainer"),this._modelDownloadButton=document.getElementById("ModelDownloadButton"),this._closeButton.addEventListener("click",this.close.bind(this)),this._variationSelectInput.addEventListener("change",this._onVariationSelectInputChange.bind(this)),this._modelIndex=null,this._variationIndex=null}open(e,t=null){if(this._overlay.style.display="block",this._window.style.display="block",this._texturesContainer.innerHTML="",this._modelIndex=e,this._variationIndex=t,this._modelDownloadButton.setAttribute("href",`${this._modelsData[e].srcFolder}/${this._modelsData[e].modelName}.fbx`),this._modelDownloadButton.download=`${this._modelsData[e].modelName}.fbx`,this._modelsData[e].textureVariations){this._variationSelectInput.style.display="inline-block",this._variationSelectInput.innerHTML="";for(let a=0;a<this._modelsData[e].textureVariations.length;a++){const s=document.createElement("option");s.value=a,s.innerText=this._modelsData[e].textureVariations[a].name,s.selected=a===t,this._variationSelectInput.appendChild(s)}}else this._variationSelectInput.style.display="none";this._createTextureButtons()}close(){this._overlay.style.display="none",this._window.style.display="none"}_createTextureButtons(){if(this._variationIndex||0===this._variationIndex)if(this._modelsData[this._modelIndex].textureVariations[this._variationIndex].parts)for(let e of this._modelsData[this._modelIndex].textureVariations[this._variationIndex].parts){const t=document.createElement("h4");t.classList.add("download-window__part-heading"),t.innerText=e.name,this._texturesContainer.appendChild(t),this._createContainerOfTextureButtons(e.types,e.name,`${this._modelsData[this._modelIndex].srcFolder}/textures/${this._modelsData[this._modelIndex].textureVariations[this._variationIndex].folderName}`)}else this._createContainerOfTextureButtons(this._modelsData[this._modelIndex].textureVariations[this._variationIndex].types,this._modelsData[this._modelIndex].modelName,`${this._modelsData[this._modelIndex].srcFolder}/textures/${this._modelsData[this._modelIndex].textureVariations[this._variationIndex].folderName}`);else this._createContainerOfTextureButtons(this._modelsData[this._modelIndex].textures,this._modelsData[this._modelIndex].modelName,`${this._modelsData[this._modelIndex].srcFolder}/textures`)}_createContainerOfTextureButtons(e,t,a){const s=document.createElement("div");s.classList.add("download-window__buttons"),this._texturesContainer.appendChild(s);for(let o of e){let e;switch(o){case"BaseColor":e="Base Color";break;case"AmbientOcclusion":e="Ambient Occlusion";break;default:e=o}const i=document.createElement("a");i.classList.add("button-secondary"),i.innerText=e,i.download=`${t}_${o}.png`,i.setAttribute("href",`${a}/${t}_${o}.png`),s.appendChild(i)}}_onVariationSelectInputChange(e){this._variationIndex=+e.target.value,this._texturesContainer.innerHTML="",this._createTextureButtons()}}(s),u=new class{constructor(){const e=document.getElementById("WebGLCanvas");this._modelViewerViewport=document.getElementById("ModelViewerViewport"),this._renderer=new n.CP7({canvas:e,antialias:window.devicePixelRatio<2}),this._renderer.setSize(e.clientWidth,e.clientHeight),this._renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this._renderer.setClearColor(new n.Ilk(2829614)),this._renderer.physicallyCorrectLights=!0,this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=n.ntZ,this._renderer.shadowMap.mapSize=new n.FM8(1024,1024),this._scene=new n.xsS,this._camera=new n.cPb(55,e.clientWidth/e.clientHeight,.1,1e4);const t=(new n.cBK).load(["../static/environment-map/px.png","../static/environment-map/nx.png","../static/environment-map/py.png","../static/environment-map/ny.png","../static/environment-map/pz.png","../static/environment-map/nz.png"]);this._scene.environment=t,this._controls=new l.z(this._camera,e),this._controls.enableDamping=!0,this._setupScene(),window.addEventListener("resize",this._onResize.bind(this)),this._currentModel=null}_onResize(){this._camera.aspect=this._modelViewerViewport.clientWidth/this._modelViewerViewport.clientHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(this._modelViewerViewport.clientWidth,this._modelViewerViewport.clientHeight),this._renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}_setupScene(){this._camera.position.x=0,this._camera.position.y=150,this._camera.position.z=100,this._scene.add(this._camera);const e=new n.Ox3(16777215,1);e.position.set(45,193,132),e.castShadow=!0,e.shadow.camera.left=-205,e.shadow.camera.right=205,e.shadow.camera.top=208,e.shadow.camera.bottom=-192,e.shadow.camera.far=392,e.shadow.mapSize=new n.FM8(1024,1024),this._scene.add(e);const t=new n.Kj0(new n._12(450,520),new n.Tn7({color:2500134}));t.rotation.x=.5*-Math.PI,t.rotation.z=.1*Math.PI,t.receiveShadow=!0,this._scene.add(t)}update(e){this._controls.update()}render(){this._renderer.render(this._scene,this._camera)}setModel(e){this._scene.add(e),this._currentModel=e}setMaterial(e){this._currentModel.traverse((t=>{t instanceof n.Kj0&&(t.material=e)}))}clean(){this._currentModel&&(this._scene.remove(this._currentModel),this._currentModel=null)}setModelRotation(e){this._currentModel.rotation.y=e}},h=new class{constructor(e){this._modelsData=e,this._fbxLoader=new r.y,this._textureLoadingManager=new n.lLk,this._textureLoadingManager.onLoad=this._onTexturesLoaded.bind(this),this._textureLoader=new n.dpR(this._textureLoadingManager),this._texturesLoaded=null,this._loadedModelIndex=null,this._model=null,this._textureVariations=new Map}_onTexturesLoaded(){this._texturesLoaded&&this._texturesLoaded(!0),this._texturesLoaded=null}loadModel(e){return e===this._loadedModelIndex?Promise.resolve(this._model):new Promise(((t,a)=>{this._fbxLoader.load(`${this._modelsData[e].srcFolder}/${this._modelsData[e].modelName}.fbx`,(a=>{a.traverse((e=>{e instanceof n.Kj0&&(e.castShadow=!0,e.receiveShadow=!0,e.geometry.setAttribute("uv2",new n.a$l(e.geometry.attributes.uv.array,2)))}));for(const e of a.children)e.isMesh&&e.position.set(0,0,0);this._loadedModelIndex=e,this._model=a,t(a)}))}))}getLoadedModel(){return this._model}loadTextureVariation(e,t){if(t=+t,this._textureVariations.has(t))return Promise.resolve(this._textureVariations.get(t).material);const a={textures:[]},s=new Promise(((e,t)=>{this._texturesLoaded=()=>e(a.material)})),o=this._modelsData[e].textureVariations[t];if(o.types){const s=new n.Wid;for(let i of o.types){const o=this._textureLoader.load(`${this._modelsData[e].srcFolder}/textures/${this._modelsData[e].textureVariations[t].folderName}/${this._modelsData[e].modelName}_${i}.png`);this._addTextureToMaterial(s,o,i),a.textures.push(o)}s.envMapIntensity=this._modelsData[e].envMapIntensity||1.75,a.material=s}else{const s=[];for(let i of o.parts){const o=new n.Wid;for(let s of i.types){const n=this._textureLoader.load(`${this._modelsData[e].srcFolder}/textures/${this._modelsData[e].textureVariations[t].folderName}/${i.name}_${s}.png`);this._addTextureToMaterial(o,n,s),a.textures.push(n)}o.envMapIntensity=this._modelsData[e].envMapIntensity||1.75,s.unshift(o)}a.material=s}return this._textureVariations.set(t,a),s}loadTextures(e){const t={material:new n.Wid,textures:[]},a=new Promise(((e,a)=>{this._texturesLoaded=()=>e(t.material)}));for(let a of this._modelsData[e].textures){const s=this._textureLoader.load(`${this._modelsData[e].srcFolder}/textures/${this._modelsData[e].modelName}_${a}.png`);this._addTextureToMaterial(t.material,s,a),t.textures.push(s)}return t.material.envMapIntensity=this._modelsData[e].envMapIntensity||1.75,this._textureVariations.set(e,t),a}_addTextureToMaterial(e,t,a){switch(a){case"BaseColor":e.map=t;break;case"Metallic":e.metalnessMap=t;break;case"Roughness":e.roughnessMap=t;break;case"Normal":e.normalMap=t;break;case"AmbientOcclusion":e.aoMap=t;break;case"Alpha":e.alphaMap=t,e.transparent=!0;break;case"Emissive":e.emissiveMap=t,e.emissive.set(16777215),e.emissiveIntesity=1}}disposeAll(){this._model&&(this._model.traverse((e=>{e.isMesh&&e.geometry.dispose()})),this._model=null),this._textureVariations&&(this._textureVariations.forEach((e=>{if(e.material instanceof Array)for(let t of e.material)t.dispose();else e.material.dispose();for(let t of e.textures)t.dispose()})),this._textureVariations.clear())}}(s);let p=null,y=null;async function _(e){let t;c.loading=!0,c.resetControls(),h.disposeAll(),u.clean(),t=s[e].textures?h.loadTextures(e):h.loadTextureVariation(e,s[e].defaultTextureVariation);const[a,o]=await Promise.all([h.loadModel(e),t]);if(u.setModel(a),u.setMaterial(o),c.setActiveModel(e),s[e].lod&&c.addLODInput(a),s[e].rotationParts)for(let t of s[e].rotationParts)c.addRotationPartInput(a,t.partName,t.labelName,t.min,t.max);c.loading=!1,p=e,y=s[e].textureVariations?s[e].defaultTextureVariation:null}i().setUpdate((()=>u.update())).setDraw((()=>u.render())),i().start(),d.onChange(_),_(0),c.onVariationChange((async e=>{c.loading=!0;const t=await h.loadTextureVariation(p,e);u.setMaterial(t),c.loading=!1,y=+e})),c.onRotationInputChange((e=>{u.setModelRotation(e*Math.PI)})),c.onDownloadButtonClick((()=>{m.open(p,y)}))}},a={};function s(e){var o=a[e];if(void 0!==o)return o.exports;var i=a[e]={exports:{}};return t[e].call(i.exports,i,i.exports,s),i.exports}s.m=t,e=[],s.O=(t,a,o,i)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,o,i]=e[c],l=!0,r=0;r<a.length;r++)(!1&i||n>=i)&&Object.keys(s.O).every((e=>s.O[e](a[r])))?a.splice(r--,1):(l=!1,i<n&&(n=i));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,o,i]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={7801:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var o,i,[n,l,r]=a,d=0;if(n.some((t=>0!==e[t]))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(r)var c=r(s)}for(t&&t(a);d<n.length;d++)i=n[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},a=self.webpackChunkthreejs_navod=self.webpackChunkthreejs_navod||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=s.O(void 0,[9365,2086,8071],(()=>s(1495)));o=s.O(o)})();